<?

include_once("../includes/main.inc.php");

Access_Backend::checkAccess("modules_admin");

/**
 * Frontend configuration
 */
if ($_VARS['page_id'] && $_VARS['element_id'] && $_VARS['content_id']) {

	if ($_POST['action'] == "config") {
		$oConfig = new \Cms\Helper\ExtensionConfig($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id'], $_VARS['language']);
		$oConfig->exam_id = $_VARS['exam_id'];
		$oConfig->save_config($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id'], $_VARS['language']);
	}
	$oConfig = new \Cms\Helper\ExtensionConfig($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id'], $_VARS['language']);

	$aExams = array();
	$aData = Ext_Elearning_Exam::getList();
	foreach((array)$aData as $aExam) {
		$aExams[$aExam['id']] = $aExam['name'];
	}

	Admin_Html::loadAdminHeader();

?>

<table cellpadding="0" cellspacing="30" border="0" width="100%" height="100%">
    <tr>
        <td valign="top">

			<h1>E-Learning &raquo; Languages</h1>

			<form method="POST" action="elearning_languages.html">
			<?=printFormHidden('action', 'config')?>
			<?=printFormHidden('page_id', $_VARS['page_id'])?>
			<?=printFormHidden('element_id', $_VARS['element_id'])?>
			<?=printFormHidden('content_id', $_VARS['content_id'])?>
			<?=printFormHidden('language', $_VARS['language'])?>
			<?=printTableStart()?>
			<?=printFormSelect(L10N::t('PrÃ¼fung'), "exam_id", $aExams, $oConfig->exam_id)?>
			<?=printTableEnd()?>
			<?=printSubmit("Konfiguration speichern")?>
			</form>

		</td>
	</tr>
</table>

<?=Admin_Html::loadAdminFooter()?>

<?
	die();
}

?>