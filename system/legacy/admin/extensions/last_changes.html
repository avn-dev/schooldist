<?

include("../includes/main.inc.php");

Access_Backend::checkAccess("modules_admin");
?>

<?=Admin_Html::loadAdminHeader()?>

<?

if($_POST['action'] == "config") {
	$config = new \Cms\Helper\ExtensionConfig($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id'], $_VARS['language']);
	$config->ftime = $_VARS['ftime'];
	$config->show = $_VARS['show'];
	$config->startlevel = $_VARS['startlevel'];
	$config->seperator = $_VARS['seperator'];
	$config->startpath = $_VARS['startpath'];
	$config->includehidden = $_VARS['includehidden'];
	$config->save_config($_VARS['page_id'], $_VARS['element_id']);
}

?>

<table cellpadding="0" cellspacing="30" border="0" width="100%" height="100%">
	<tr>
		<td valign="top">
			<h1>Standardmodule &raquo; Letzte Ã„nderungen</h1>
			<p>
<?

$config = new \Cms\Helper\ExtensionConfig($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id'], $_VARS['language']);

if($_VARS['page_id'] && $_VARS['element_id']) {
?>
			<form method="POST" action="last_changes.html">
			<input type="hidden" name="action" value="config">
			<input type="hidden" name="page_id" value="<?=$_VARS['page_id']?>">
			<input type="hidden" name="element_id" value="<?=$_VARS['element_id']?>">
			<?=printTableStart()?>
			<?=printFormText("Format der Zeitangabe (strftime-Parameter)", "ftime", $config->ftime)?>
			<?=printFormText("Anzahl der Seiten","show", $config->show)?>
			<?=printFormText("Startlevel im Track", "startlevel", $config->startlevel)?>
			<?=printFormText("Seperator im Track", "seperator", $config->seperator)?>
			<?=printFormText("Startpfad", "startpath", $config->startpath)?>
			<?=printFormCheckbox("Versteckte Seiten anzeigen","includehidden",1,$config->includehidden)?>
			<?=printTableEnd()?>
			<?=printSubmit("Konfiguration speichern")?>
			</form>		
<?
}
?>
		</td>
	</tr>
</table>
<?=Admin_Html::loadAdminFooter()?>