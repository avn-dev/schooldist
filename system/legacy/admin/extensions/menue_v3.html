<?php

include("../includes/main.inc.php");

Access_Backend::checkAccess("modules_admin");

?>

<?=Admin_Html::loadAdminHeader()?>

<table cellpadding="0" cellspacing="30" border="0" width="100%">
	<tr>
		<td valign="top">
			<h1>Navigation &raquo; Administration</h1>

<?php

if($_VARS['page_id'] && $_VARS['element_id']) {

	if($_VARS['action'] == "config") {
		$config = new \Cms\Helper\ExtensionConfig($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id'], $_VARS['language']);
		$config->start_page 	= $_VARS['start_page'];
		$config->show_hidden 	= $_VARS['show_hidden'];
		$config->use_domain 	= $_VARS['use_domain'];
		$config->with_language 	= $_VARS['with_language'];
		$config->extension	 	= $_VARS['extension'];
		$config->save_config($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id']);
	}
	$config = new \Cms\Helper\ExtensionConfig($_VARS['page_id'], $_VARS['element_id'], $_VARS['content_id'], $_VARS['language']);

	$arrPageSelectOptions = array();
	$arrPageSelectOptions['empty']	= array("0"=>"keine Auswahl");
	$arrPageSelectOptions['value_type']	= 1;

	if(!isset($config->with_language)) {
		$config->with_language = true;
	}
	
	if(!isset($config->extension)) {
		$config->extension = 'html';
	}
	
?>
			<form method="POST" action="menue_v3.html">
			<input type="hidden" name="action" value="config">
			<input type="hidden" name="page_id" value="<?=(int)$_VARS['page_id']?>">
			<input type="hidden" name="element_id" value="<?=(int)$_VARS['element_id']?>">
			<input type="hidden" name="content_id" value="<?=(int)$_VARS['content_id']?>">
			<?=printTableStart()?>
				<?=printFormPageSelect("Start der Navigation", "start_page", $config->start_page, $arrPageSelectOptions)?>
				<?=printFormCheckbox("Auch ausglebendete Punkte anzeigen?", "show_hidden", 1, $config->show_hidden)?>
				<?=printFormCheckbox("Link inklusive Domain", "use_domain", 1, $config->use_domain)?>
				<?=printFormCheckbox("Link inklusive Sprache", "with_language", 1, $config->with_language)?>
				<?=printFormText("Datei-Endung", "extension", $config->extension)?>
			<?=printTableEnd()?>

			<?=printSubmit("Konfiguration speichern")?>
			</form>

<?php
}
?>
		</td>
	</tr>
</table>
<?=Admin_Html::loadAdminFooter()?>