var Window=Class.create();Window.prototype={initialize:function(id){if($(id)){alert("Window "+id+" is already register is the DOM!!, be sure to use setDestroyOnClose()");}this.hasEffectLib=String.prototype.parseColor!=null;this.options=Object.extend({className:"dialog",minWidth:100,minHeight:20,resizable:true,closable:true,minimizable:true,maximizable:true,draggable:true,userData:null,showEffect:(this.hasEffectLib?Effect.Appear:Element.show),hideEffect:(this.hasEffectLib?Effect.Fade:Element.hide),showEffectOptions:{},hideEffectOptions:{},effectOptions:null,parent:document.getElementsByTagName("body").item(0),title:"&nbsp;",url:null,onload:Prototype.emptyFunction,width:200,height:300,opacity:1},arguments[1]||{});if(this.options.effectOptions){Object.extend(this.options.hideEffectOptions,this.options.effectOptions);Object.extend(this.options.showEffectOptions,this.options.effectOptions);}if(this.options.hideEffect==Element.hide){this.options.hideEffect=function(){Element.hide(this.element);if(this.destroyOnClose){this.destroy();}}.bind(this);}this.element=this._createWindow(id);this.eventMouseDown=this._initDrag.bindAsEventListener(this);this.eventMouseUp=this._endDrag.bindAsEventListener(this);this.eventMouseMove=this._updateDrag.bindAsEventListener(this);this.eventKeyPress=this._keyPress.bindAsEventListener(this);this.eventOnLoad=this._getWindowBorderSize.bindAsEventListener(this);this.eventMouseDownContent=this.toFront.bindAsEventListener(this);this.eventResize=this._recenter.bindAsEventListener(this);this.topbar=$(this.element.id+"_top");this.bottombar=$(this.element.id+"_bottom");this.content=$(this.element.id+"_content");Event.observe(this.topbar,"mousedown",this.eventMouseDown);Event.observe(this.bottombar,"mousedown",this.eventMouseDown);Event.observe(this.content,"mousedown",this.eventMouseDownContent);Event.observe(window,"load",this.eventOnLoad);Event.observe(window,"resize",this.eventResize);Event.observe(window,"scroll",this.eventResize);if(this.options.draggable){this.bottombar.addClassName("bottom_draggable");this.topbar.addClassName("top_draggable");}if(this.options.resizable){this.sizer=$(this.element.id+"_sizer");Event.observe(this.sizer,"mousedown",this.eventMouseDown);}this.useLeft=null;this.useTop=null;if(arguments[1].left!=null){this.element.setStyle({left:parseFloat(arguments[1].left)+"px"});this.useLeft=true;}if(arguments[1].right!=null){this.element.setStyle({right:parseFloat(arguments[1].right)+"px"});this.useLeft=false;}if(this.useLeft==null){this.element.setStyle({left:"0px"});this.useLeft=true;}if(arguments[1].top!=null){this.element.setStyle({top:parseFloat(arguments[1].top)+"px"});this.useTop=true;}if(arguments[1].bottom!=null){this.element.setStyle({bottom:parseFloat(arguments[1].bottom)+"px"});this.useTop=false;}if(this.useTop==null){this.element.setStyle({top:"0px"});this.useTop=true;}this.storedLocation=null;this.setOpacity(this.options.opacity);if(this.options.zIndex){this.setZIndex(this.options.zIndex);}this.destroyOnClose=false;this._getWindowBorderSize();this.width=this.options.width;this.height=this.options.height;if(this.width&&this.height){this.setSize(this.options.width,this.options.height);}this.setTitle(this.options.title);Windows.register(this);},destroy:function(){Windows.notify("onDestroy",this);Event.stopObserving(this.topbar,"mousedown",this.eventMouseDown);Event.stopObserving(this.bottombar,"mousedown",this.eventMouseDown);Event.stopObserving(this.content,"mousedown",this.eventMouseDownContent);Event.stopObserving(window,"load",this.eventOnLoad);Event.stopObserving(window,"resize",this.eventResize);Event.stopObserving(window,"scroll",this.eventResize);Event.stopObserving(this.content,"load",this.options.onload);if(this.sizer){Event.stopObserving(this.sizer,"mousedown",this.eventMouseDown);}if(this.options.url){this.content.src=null;}if(this.iefix){Element.remove(this.iefix);}Element.remove(this.element);Windows.unregister(this);},setDelegate:function(_2){this.delegate=_2;},getDelegate:function(){return this.delegate;},getContent:function(){return this.content;},setContent:function(id,_4,_5){var d=null;var p=null;if(_4){d=Element.getDimensions(id);}if(_5){p=Position.cumulativeOffset($(id));}var _8=this.getContent();_8.appendChild($(id));$(id).show();if(_4){this.setSize(d.width,d.height);}if(_5){this.setLocation(p[1]-this.heightN,p[0]-this.widthW);}},setAjaxContent:function(_9,_a,_b,_c){this.showFunction=_b?"showCenter":"show";this.showModal=_c||false;if(_a==null){_a={};}this.onComplete=_a.onComplete;_a.onComplete=this._setAjaxContent.bind(this);new Ajax.Request(_9,_a);},_setAjaxContent:function(_d){this.getContent().innerHTML=_d.responseText;if(this.onComplete){this.onComplete(_d);}this[this.showFunction](this.showModal);},setCookie:function(_e,_f,_10,_11,_12){_e=_e||this.element.id;this.cookie=[_e,_f,_10,_11,_12];var _13=WindowUtilities.getCookie(_e);if(_13){var _14=_13.split(",");var x=_14[0].split(":");var y=_14[1].split(":");var w=parseFloat(_14[2]),h=parseFloat(_14[3]);var _18=_14[4];var _19=_14[5];this.setSize(w,h);if(_18=="true"){this.doMinimize=true;}else{if(_19=="true"){this.doMaximize=true;}}this.useLeft=x[0]=="l";this.useTop=y[0]=="t";this.element.setStyle(this.useLeft?{left:x[1]}:{right:x[1]});this.element.setStyle(this.useTop?{top:y[1]}:{bottom:y[1]});}},getId:function(){return this.element.id;},setDestroyOnClose:function(){Object.extend(this.options.hideEffectOptions,{afterFinish:this.destroy.bind(this)});this.destroyOnClose=true;},_initDrag:function(_1a){this.pointer=[Event.pointerX(_1a),Event.pointerY(_1a)];if(Event.element(_1a)==this.sizer){this.doResize=true;this.widthOrg=this.width;this.heightOrg=this.height;this.bottomOrg=parseFloat(this.element.getStyle("bottom"));this.rightOrg=parseFloat(this.element.getStyle("right"));Windows.notify("onStartResize",this);}else{this.doResize=false;var _1b=$(this.getId()+"_close");if(_1b&&Position.within(_1b,this.pointer[0],this.pointer[1])){return;}this.toFront();if(!this.options.draggable){return;}Windows.notify("onStartMove",this);}Event.observe(document,"mouseup",this.eventMouseUp,false);Event.observe(document,"mousemove",this.eventMouseMove,false);WindowUtilities.disableScreen("__invisible__","__invisible__");document.body.ondrag=function(){return false;};document.body.onselectstart=function(){return false;};Event.stop(_1a);},_updateDrag:function(_1c){var _1d=[Event.pointerX(_1c),Event.pointerY(_1c)];var dx=_1d[0]-this.pointer[0];var dy=_1d[1]-this.pointer[1];if(this.doResize){this.setSize(this.widthOrg+dx,this.heightOrg+dy);dx=this.width-this.widthOrg;dy=this.height-this.heightOrg;if(!this.useLeft){this.element.setStyle({right:(this.rightOrg-dx)+"px"});}if(!this.useTop){this.element.setStyle({bottom:(this.bottomOrg-dy)+"px"});}}else{this.pointer=_1d;if(this.useLeft){this.element.setStyle({left:parseFloat(this.element.getStyle("left"))+dx+"px"});}else{this.element.setStyle({right:parseFloat(this.element.getStyle("right"))-dx+"px"});}if(this.useTop){this.element.setStyle({top:parseFloat(this.element.getStyle("top"))+dy+"px"});}else{this.element.setStyle({bottom:parseFloat(this.element.getStyle("bottom"))-dy+"px"});}}if(this.iefix){this._fixIEOverlapping();}this._removeStoreLocation();Event.stop(_1c);},_endDrag:function(_20){WindowUtilities.enableScreen("__invisible__");if(this.doResize){Windows.notify("onEndResize",this);}else{Windows.notify("onEndMove",this);}Event.stopObserving(document,"mouseup",this.eventMouseUp,false);Event.stopObserving(document,"mousemove",this.eventMouseMove,false);this._saveCookie();Event.stop(_20);document.body.ondrag=null;document.body.onselectstart=null;},_keyPress:function(_21){},_createWindow:function(id){var _23=this.options.className;var win=document.createElement("div");win.setAttribute("id",id);win.className="dialog";var _25;if(this.options.url){_25="<iframe name=\""+id+"_content\"  id=\""+id+"_content\" src=\""+this.options.url+"\"> </iframe>";}else{_25="<div id=\""+id+"_content\" class=\""+_23+"_content\"> </div>";}var _26=this.options.closable?"<div class='"+_23+"_close' id='"+id+"_close' onmouseup='Windows.close(\""+id+"\")'> </div>":"";var _27=this.options.minimizable?"<div class='"+_23+"_minimize' id='"+id+"_minimize' onmouseup='Windows.minimize(\""+id+"\")'> </div>":"";var _28=this.options.maximizable?"<div class='"+_23+"_maximize' id='"+id+"_maximize' onmouseup='Windows.maximize(\""+id+"\")'> </div>":"";var _29=this.options.resizable?"class='"+_23+"_sizer' id='"+id+"_sizer'":"class='"+_23+"_se'";win.innerHTML=_26+_27+_28+"      <table id='"+id+"_row1' class=\"top table_window\">        <tr>          <td class='"+_23+"_nw'>&nbsp;</td>          <td class='"+_23+"_n'><div id='"+id+"_top' class='"+_23+"_title title_window'>"+this.options.title+"</div></td>          <td class='"+_23+"_ne'>&nbsp;</td>        </tr>      </table>      <table id='"+id+"_row2' class=\"mid table_window\">        <tr>          <td class='"+_23+"_w'></td>            <td id='"+id+"_table_content' class='"+_23+"_content' valign='top'>"+_25+"</td>          <td class='"+_23+"_e'></td>        </tr>      </table>        <table id='"+id+"_row3' class=\"bot table_window\">        <tr>          <td class='"+_23+"_sw'>&nbsp;</td>            <td class='"+_23+"_s'><div id='"+id+"_bottom' class='status_bar'>&nbsp;</div></td>            <td "+_29+">&nbsp;</td>        </tr>      </table>    ";Element.hide(win);this.options.parent.insertBefore(win,this.options.parent.firstChild);Event.observe($(id+"_content"),"load",this.options.onload);return win;},setLocation:function(top,_2b){if(top<0){top=0;}if(_2b<0){_2b=0;}this.element.setStyle({top:top+"px"});this.element.setStyle({left:_2b+"px"});this.useLeft=true;this.useTop=true;},getSize:function(){return {width:this.width,height:this.height};},setSize:function(_2c,_2d){_2c=parseFloat(_2c);_2d=parseFloat(_2d);if(_2c<this.options.minWidth){_2c=this.options.minWidth;}if(_2d<this.options.minHeight){_2d=this.options.minHeight;}if(this.options.maxHeight&&_2d>this.options.maxHeight){_2d=this.options.maxHeight;}if(this.options.maxWidth&&_2c>this.options.maxWidth){_2c=this.options.maxWidth;}this.width=_2c;this.height=_2d;this.element.setStyle({width:_2c+this.widthW+this.widthE+"px"});this.element.setStyle({height:_2d+this.heightN+this.heightS+"px"});var _2e=$(this.element.id+"_content");_2e.setStyle({height:_2d+"px"});_2e.setStyle({width:_2c+"px"});},updateHeight:function(){this.setSize(this.width,this.content.scrollHeight);},updateWidth:function(){this.setSize(this.content.scrollWidth,this.height);},toFront:function(){this.setZIndex(Windows.maxZIndex+20);Windows.notify("onFocus",this);},show:function(_2f){if(_2f){WindowUtilities.disableScreen(this.options.className,"overlay_modal",this.getId());this.modal=true;this.setZIndex(Windows.maxZIndex+20);Windows.unsetOverflow(this);Event.observe(document,"keypress",this.eventKeyPress);}if(this.oldStyle){this.getContent().setStyle({overflow:this.oldStyle});}if(!this.width||!this.height){var _30=WindowUtilities._computeSize(this.content.innerHTML,this.content.id,this.width,this.height,0);if(this.height){this.width=_30+5;}else{this.height=_30+5;}}this.setSize(this.width,this.height);if(this.centered){this._center(this.centerTop,this.centerLeft);}if(this.options.showEffect!=Element.show&&this.options.showEffectOptions){this.options.showEffect(this.element,this.options.showEffectOptions);}else{this.options.showEffect(this.element);}this._checkIEOverlapping();Windows.notify("onShow",this);},showCenter:function(_31,top,_33){this.centered=true;this.centerTop=top;this.centerLeft=_33;this.show(_31);},isVisible:function(){return this.element.visible();},_center:function(top,_35){var _36=WindowUtilities.getWindowScroll();var _37=WindowUtilities.getPageSize();if(!top){top=(_37.windowHeight-(this.height+this.heightN+this.heightS))/2;}top+=_36.top;if(!_35){_35=(_37.windowWidth-(this.width+this.widthW+this.widthE))/2;}_35+=_36.left;this.setLocation(top,_35);this.toFront();},_recenter:function(_38){if(this.modal){var _39=WindowUtilities.getPageSize();if($("overlay_modal")){$("overlay_modal").style.height=(_39.pageHeight+"px");$("overlay_modal").style.width=(_39.pageWidth+"px");}if(this.centered){this._center(this.centerTop,this.centerLeft);}}},hide:function(){if(this.modal){WindowUtilities.enableScreen();Windows.resetOverflow();Event.stopObserving(document,"keypress",this.eventKeyPress);}this.oldStyle=this.getContent().getStyle("overflow")||"auto";this.getContent().setStyle({overflow:"hidden"});this.options.hideEffect(this.element,this.options.hideEffectOptions);if(this.iefix){this.iefix.hide();}Windows.notify("onHide",this);},minimize:function(){var r2=$(this.getId()+"_row2");var dh=r2.getDimensions().height;if(r2.visible()){var h=this.element.getHeight()-dh;r2.hide();this.element.setStyle({height:h+"px"});if(!this.useTop){var _3d=parseFloat(this.element.getStyle("bottom"));this.element.setStyle({bottom:(_3d+dh)+"px"});}}else{var h=this.element.getHeight()+dh;this.element.setStyle({height:h+"px"});if(!this.useTop){var _3f=parseFloat(this.element.getStyle("bottom"));this.element.setStyle({bottom:(_3f-dh)+"px"});}r2.show();this.toFront();}Windows.notify("onMinimize",this);this._saveCookie();},maximize:function(){if(this.storedLocation!=null){this._restoreLocation();if(this.iefix){this.iefix.hide();}}else{this._storeLocation();Windows.unsetOverflow(this);var _40=WindowUtilities.getWindowScroll();var _41=WindowUtilities.getPageSize();this.element.setStyle(this.useLeft?{left:_40.left}:{right:_40.left});this.element.setStyle(this.useTop?{top:_40.top}:{bottom:_40.top});this.setSize(_41.windowWidth-this.widthW-this.widthE,_41.windowHeight-this.heightN-this.heightS);this.toFront();if(this.iefix){this._fixIEOverlapping();}}Windows.notify("onMaximize",this);this._saveCookie();},isMinimized:function(){var r2=$(this.getId()+"_row2");return !r2.visible();},isMaximized:function(){return (this.storedLocation!=null);},setOpacity:function(_43){if(Element.setOpacity){Element.setOpacity(this.element,_43);}},setZIndex:function(_44){this.element.setStyle({zIndex:_44});Windows.updateZindex(_44,this);},setTitle:function(_45){if(!_45||_45==""){_45="&nbsp;";}Element.update(this.element.id+"_top",_45);},setStatusBar:function(_46){var _47=$(this.getId()+"_bottom");if(typeof (_46)=="object"){if(this.bottombar.firstChild){this.bottombar.replaceChild(_46,this.bottombar.firstChild);}else{this.bottombar.appendChild(_46);}}else{this.bottombar.innerHTML=_46;}},_checkIEOverlapping:function(){if(!this.iefix&&(navigator.appVersion.indexOf("MSIE")>0)&&(navigator.userAgent.indexOf("Opera")<0)&&(this.element.getStyle("position")=="absolute")){new Insertion.After(this.element.id,"<iframe id=\""+this.element.id+"_iefix\" "+"style=\"display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);\" "+"src=\"javascript:false;\" frameborder=\"0\" scrolling=\"no\"></iframe>");this.iefix=$(this.element.id+"_iefix");}if(this.iefix){setTimeout(this._fixIEOverlapping.bind(this),50);}},_fixIEOverlapping:function(){Position.clone(this.element,this.iefix);this.iefix.style.zIndex=this.element.style.zIndex-1;this.iefix.show();},_getWindowBorderSize:function(_48){var div=this._createHiddenDiv(this.options.className+"_n");this.heightN=Element.getDimensions(div).height;div.parentNode.removeChild(div);var div=this._createHiddenDiv(this.options.className+"_s");this.heightS=Element.getDimensions(div).height;div.parentNode.removeChild(div);var div=this._createHiddenDiv(this.options.className+"_e");this.widthE=Element.getDimensions(div).width;div.parentNode.removeChild(div);var div=this._createHiddenDiv(this.options.className+"_w");this.widthW=Element.getDimensions(div).width;div.parentNode.removeChild(div);if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){this.setSize(this.width,this.height);}if(this.doMaximize){this.maximize();}if(this.doMinimize){this.minimize();}},_createHiddenDiv:function(_4d){var _4e=document.getElementsByTagName("body").item(0);var win=document.createElement("div");win.setAttribute("id",this.element.id+"_tmp");win.className=_4d;win.style.display="none";win.innerHTML="";_4e.insertBefore(win,_4e.firstChild);return win;},_storeLocation:function(){if(this.storedLocation==null){this.storedLocation={useTop:this.useTop,useLeft:this.useLeft,top:this.element.getStyle("top"),bottom:this.element.getStyle("bottom"),left:this.element.getStyle("left"),right:this.element.getStyle("right"),width:this.width,height:this.height};}},_restoreLocation:function(){if(this.storedLocation!=null){this.useLeft=this.storedLocation.useLeft;this.useTop=this.storedLocation.useTop;this.element.setStyle(this.useLeft?{left:this.storedLocation.left}:{right:this.storedLocation.right});this.element.setStyle(this.useTop?{top:this.storedLocation.top}:{bottom:this.storedLocation.bottom});this.setSize(this.storedLocation.width,this.storedLocation.height);Windows.resetOverflow();this._removeStoreLocation();}},_removeStoreLocation:function(){this.storedLocation=null;},_saveCookie:function(){if(this.cookie){var _50="";if(this.useLeft){_50+="l:"+(this.storedLocation?this.storedLocation.left:this.element.getStyle("left"));}else{_50+="r:"+(this.storedLocation?this.storedLocation.right:this.element.getStyle("right"));}if(this.useTop){_50+=",t:"+(this.storedLocation?this.storedLocation.top:this.element.getStyle("top"));}else{_50+=",b:"+(this.storedLocation?this.storedLocation.bottom:this.element.getStyle("bottom"));}_50+=","+(this.storedLocation?this.storedLocation.width:this.width);_50+=","+(this.storedLocation?this.storedLocation.height:this.height);_50+=","+this.isMinimized();_50+=","+this.isMaximized();WindowUtilities.setCookie(_50,this.cookie);}}};var Windows={windows:[],observers:[],focusedWindow:null,maxZIndex:0,addObserver:function(_51){this.removeObserver(_51);this.observers.push(_51);},removeObserver:function(_52){this.observers=this.observers.reject(function(o){return o==_52;});},notify:function(_54,win){this.observers.each(function(o){if(o[_54]){o[_54](_54,win);}});},getWindow:function(id){return this.windows.detect(function(d){return d.getId()==id;});},getFocusedWindow:function(){return this.focusedWindow;},register:function(win){this.windows.push(win);},unregister:function(win){this.windows=this.windows.reject(function(d){return d==win;});},close:function(id){var win=this.getWindow(id);if(win){if(win.getDelegate()&&!win.getDelegate().canClose(win)){return;}if($(id+"_close")){$(id+"_close").onclick=null;}if($(id+"_minimize")){$(id+"_minimize").onclick=null;}if($(id+"_maximize")){$(id+"_maximize").onclick=null;}this.notify("onClose",win);win.hide();}},closeAll:function(){this.windows.each(function(w){Windows.close(w.getId());});},minimize:function(id){var win=this.getWindow(id);if(win){win.minimize();}},maximize:function(id){var win=this.getWindow(id);if(win){win.maximize();}},unsetOverflow:function(_63){this.windows.each(function(d){d.oldOverflow=d.getContent().getStyle("overflow")||"auto";d.getContent().setStyle({overflow:"hidden"});});if(_63&&_63.oldOverflow){_63.getContent().setStyle({overflow:_63.oldOverflow});}},resetOverflow:function(){this.windows.each(function(d){if(d.oldOverflow){d.getContent().setStyle({overflow:d.oldOverflow});}});},updateZindex:function(_66,win){if(_66>this.maxZIndex){this.maxZIndex=_66;}this.focusedWindow=win;}};var Dialog={dialogId:null,win:null,onCompleteFunc:null,callFunc:null,parameters:null,confirm:function(_68,_69){if(typeof _68!="string"){Dialog._runAjaxRequest(_68,_69,Dialog.confirm);return;}_69=_69||{};var _6a=_69.okLabel?_69.okLabel:"Ok";var _6b=_69.cancelLabel?_69.cancelLabel:"Cancel";var _6c=_69.windowParameters||{};_6c.className=_6c.className||"alert";okButtonClass="class ='"+(_69.buttonClass?_69.buttonClass+" ":"")+" ok_button'";cancelButtonClass="class ='"+(_69.buttonClass?_69.buttonClass+" ":"")+" cancel_button'";var _6d="\t\t\t<div class='"+_6c.className+"_message'>"+_6d+"</div>\t\t\t\t<div class='"+_6c.className+"_buttons'>\t\t\t\t\t<input type='button' value='"+_6a+"' onclick='Dialog.okCallback()'"+okButtonClass+"/>\t\t\t\t\t<input type='button' value='"+_6b+"' onclick='Dialog.cancelCallback()' "+cancelButtonClass+"/>\t\t\t\t</div>\t\t";this._openDialog(_6d,_69);return this.win;},alert:function(_6e,_6f){if(typeof _6e!="string"){Dialog._runAjaxRequest(_6e,_6f,Dialog.alert);return;}_6f=_6f||{};var _70=_6f.okLabel?_6f.okLabel:"Ok";var _71=_6f.windowParameters||{};_71.className=_71.className||"alert";okButtonClass="class ='"+(_6f.buttonClass?_6f.buttonClass+" ":"")+" ok_button'";var _72="\t\t\t<div class='"+_71.className+"_message'>"+_72+"</div>\t\t\t\t<div class='"+_71.className+"_buttons'>\t\t\t\t\t<input type='button' value='"+_70+"' onclick='Dialog.okCallback()'"+okButtonClass+"/>\t\t\t\t</div>";return this._openDialog(_72,_6f);},info:function(_73,_74){if(typeof _73!="string"){Dialog._runAjaxRequest(_73,_74,Dialog.info);return;}_74=_74||{};_74.windowParameters=_74.windowParameters||{};var _75=_74.windowParameters.className||"alert";var _76="<div id='modal_dialog_message' class='"+_75+"_message'>"+_76+"</div>";if(_74.showProgress){_76+="<div id='modal_dialog_progress' class='"+_75+"_progress'>\t</div>";}_74.windowParameters.ok=null;_74.windowParameters.cancel=null;_74.windowParameters.className=_75;return this._openDialog(_76,_74);},setInfoMessage:function(_77){$("modal_dialog_message").update(_77);},closeInfo:function(){Windows.close(this.dialogId);},_openDialog:function(_78,_79){if(this.win){this.win.destroy();}if(!_79.windowParameters.height&&!_79.windowParameters.width){_79.windowParameters.width=WindowUtilities.getPageSize().pageWidth/2;}this.dialogId=_79.id?_79.id:"modal_dialog";if(!_79.windowParameters.height||!_79.windowParameters.width){var _7a=WindowUtilities._computeSize(_78,this.dialogId,_79.windowParameters.width,_79.windowParameters.height);if(_79.windowParameters.height){_79.windowParameters.width=_7a+5;}else{_79.windowParameters.height=_7a+5;}}var _7b=_79&&_79.windowParameters?_79.windowParameters:{};_7b.resizable=_7b.resizable||false;_7b.effectOptions=_7b.effectOptions||{duration:1};_7b.minimizable=false;_7b.maximizable=false;_7b.closable=false;this.win=new Window(this.dialogId,_7b);this.win.getContent().innerHTML=_78;this.win.showCenter(true,_79.top,_79.left);this.win.cancelCallback=_79.cancel;this.win.okCallback=_79.ok;return this.win;},_getAjaxContent:function(_7c){Dialog.callFunc(_7c.responseText,Dialog.parameters);},_runAjaxRequest:function(_7d,_7e,_7f){if(_7d.options==null){_7d.options={};}Dialog.onCompleteFunc=_7d.options.onComplete;Dialog.parameters=_7e;Dialog.callFunc=_7f;_7d.options.onComplete=Dialog._getAjaxContent;new Ajax.Request(_7d.url,_7d.options);},okCallback:function(){if(!this.win.okCallback||this.win.okCallback(this.win)){this.win.hide();}},cancelCallback:function(){this.win.hide();if(this.win.cancelCallback){this.win.cancelCallback(this.win);}}};var isIE=navigator.appVersion.match(/MSIE/)=="MSIE";var WindowUtilities={getWindowScroll:function(){var w=window;var T,L,W,H;with(w.document){if(w.document.documentElement&&documentElement.scrollTop){T=documentElement.scrollTop;L=documentElement.scrollLeft;}else{if(w.document.body){T=body.scrollTop;L=body.scrollLeft;}}if(w.innerWidth){W=w.innerWidth;H=w.innerHeight;}else{if(w.document.documentElement&&documentElement.clientWidth){W=documentElement.clientWidth;H=documentElement.clientHeight;}else{W=body.offsetWidth;H=body.offsetHeight;}}}return {top:T,left:L,width:W,height:H};},getPageSize:function(){var _82,yScroll;if(window.innerHeight&&window.scrollMaxY){_82=document.body.scrollWidth;yScroll=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_82=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else{_82=document.body.offsetWidth;yScroll=document.body.offsetHeight;}}var _83,windowHeight;if(self.innerHeight){_83=self.innerWidth;windowHeight=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_83=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else{if(document.body){_83=document.body.clientWidth;windowHeight=document.body.clientHeight;}}}var _84,pageWidth;if(yScroll<windowHeight){_84=windowHeight;}else{_84=yScroll;}if(_82<_83){pageWidth=_83;}else{pageWidth=_82;}return {pageWidth:pageWidth,pageHeight:_84,windowWidth:_83,windowHeight:windowHeight};},disableScreen:function(_85,_86,_87){WindowUtilities.initLightbox(_86,_85);var _88=document.getElementsByTagName("body").item(0);var _89=$(_86);var _8a=WindowUtilities.getPageSize();if(_87&&isIE){$$("select").each(function(_8b){_8b.style.visibility="hidden";});$$("#"+_87+" select").each(function(_8c){_8c.style.visibility="visible";});}_89.style.height=(_8a.pageHeight+"px");_89.style.width=(_8a.windowWidth+"px");_89.style.display="block";},enableScreen:function(id){id=id||"overlay_modal";var _8e=$(id);if(_8e){_8e.style.display="none";if(isIE){$$("select").each(function(_8f){_8f.style.visibility="visible";});}_8e.parentNode.removeChild(_8e);}},initLightbox:function(id,_91){if($(id)){Element.setStyle(id,{zIndex:Windows.maxZIndex+10});}else{var _92=document.getElementsByTagName("body").item(0);var _93=document.createElement("div");_93.setAttribute("id",id);_93.className="overlay_"+_91;_93.style.display="none";_93.style.position="absolute";_93.style.top="0";_93.style.left="0";_93.style.zIndex=Windows.maxZIndex+10;_93.style.width="100%";_92.insertBefore(_93,_92.firstChild);}},setCookie:function(_94,_95){document.cookie=_95[0]+"="+escape(_94)+((_95[1])?"; expires="+_95[1].toGMTString():"")+((_95[2])?"; path="+_95[2]:"")+((_95[3])?"; domain="+_95[3]:"")+((_95[4])?"; secure":"");},getCookie:function(_96){var dc=document.cookie;var _98=_96+"=";var _99=dc.indexOf("; "+_98);if(_99==-1){_99=dc.indexOf(_98);if(_99!=0){return null;}}else{_99+=2;}var end=document.cookie.indexOf(";",_99);if(end==-1){end=dc.length;}return unescape(dc.substring(_99+_98.length,end));},_computeSize:function(_9b,id,_9d,_9e,_9f){if(_9f==null){_9f=5;}var _a0=document.getElementsByTagName("body").item(0);var _a1=document.createElement("div");_a1.setAttribute("id",id);if(_9e){_a1.style.height=_9e+"px";}else{_a1.style.width=_9d+"px";}_a1.style.position="absolute";_a1.style.top="0";_a1.style.left="0";_a1.style.display="none";_a1.innerHTML=_9b;_a0.insertBefore(_a1,_a0.firstChild);var _a2;if(_9e){_a2=$(id).getDimensions().width+_9f;}else{_a2=$(id).getDimensions().height+_9f;}_a0.removeChild(_a1);return _a2;}};